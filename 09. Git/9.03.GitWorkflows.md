# 9.03 Git Workflows

This file describes common Git workflows used in day-to-day development.
It focuses on **how to work with Git safely and predictably**, especially in a team.

---

## What a Git workflow is

A Git workflow defines:

- how branches are created
- how changes are integrated
- how history is kept readable
- how teams avoid conflicts

A workflow is about **process**, not commands.

---

## Feature branch workflow (most common)

This workflow is ideal for small to medium-sized projects.  
Larger teams may use more complex branching strategies.

### Core idea

- `main` (sometimes called `master`) is always stable
- all work happens in feature branches
- features are merged back into `main` when finished

You never work directly on `main`.

---

### Typical flow

1. Start from `main`
2. Create a feature branch
3. Commit changes to the feature branch
4. Bring your branch up to date with `main` (via merge or rebase)
5. Merge back into `main`
6. Delete the feature branch

---

### Example

```bash
git checkout main
git pull

git checkout -b feature/login-form
# work, commit, commit...

git checkout main
git pull
git merge feature/login-form

git branch -d feature/login-form
```

---

## Merge vs Rebase (conceptual difference)

### Merge

**Merge combines branches and preserves history as it happened.**

```bash
git checkout main
git merge feature/login-form
```

**What happens:**

- creates a merge commit
- keeps full branch history
- shows when branches diverged

**Pros:**

- safe
- simple
- good for shared branches

**Cons:**

- history can become noisy

---

### Rebase

**Rebase rewrites history to make it look linear.**

```bash
git checkout feature/login-form
git rebase main
```

**What happens:**

- feature commits are replayed on top of `main`
- no merge commit is created
- history looks cleaner and linear

**Pros:**

- linear, readable history
- easier to scan `git log`

**Cons:**

- rewrites history
- dangerous if used on shared branches

---

## When to use merge

Use **merge** when:

- working in a team
- the branch is shared
- safety matters more than clean history
- you want to preserve context

**Merge is the safest default choice.**

---

## When to use rebase

Use **rebase** when:

- working alone on a feature branch
- cleaning up commits before merging
- you understand the risks
- the branch is not shared

Never rebase `main` or shared branches.

---

## Other common Git workflow models

Different teams use different workflows depending on release process, team size, and deployment style.

---

### GitFlow workflow

Best for large teams and release based products.

#### Branch types

- `main` for production releases
- `develop` for integration
- `feature/*` for features
- `release/*` for release preparation
- `hotfix/*` for urgent fixes

#### Characteristics

- very structured
- multiple branch types
- supports release cycles
- more process overhead

**Tradeoff:** more control, less speed.

---

### GitHub Flow

Best for web apps and continuous deployment.

#### Model

- single main branch
- short lived feature branches
- pull request for every change
- review then merge
- deploy after merge

#### Characteristics

- simple rules
- fast iteration
- low ceremony
- relies on CI and tests

**Tradeoff:** speed over structure.

---

### Trunk based development

Best for high maturity teams with strong CI.

#### Model

- developers integrate into `main` very frequently
- branches are very short lived
- feature flags used instead of long branches

#### Characteristics

- fast integration
- fewer merge conflicts
- requires automated testing
- requires discipline

**Tradeoff:** high speed but needs strong tooling.

---

### Workflow comparison

| Workflow       | Structure | Speed     | Branching        | Typical use    |
| -------------- | --------- | --------- | ---------------- | -------------- |
| Feature branch | medium    | medium    | feature branches | most teams     |
| GitFlow        | high      | slower    | many types       | release driven |
| GitHub Flow    | low       | fast      | short lived      | SaaS and web   |
| Trunk based    | medium    | very fast | minimal          | CI heavy teams |

---

## Mental model

- **Feature branch** → isolation
- **Merge** → combine histories safely
- **Rebase** → rewrite history for clarity
- **Main branch** → always stable
- Short lived branches reduce risk
- Simpler workflow is usually better

Choose clarity and safety over cleverness.

---

## Summary

- Use feature branches for all work
- Keep `main` stable and deployable
- Prefer merge for shared branches
- Use rebase carefully and locally
- A simple workflow beats a clever one
