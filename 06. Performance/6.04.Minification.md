# 6.04 Minification

**Minification** is a build-time optimisation that makes files **smaller**
by removing anything that is **not required for execution**.

It is one of the **simplest and most effective performance optimisations**.

---

## What minification is

Minification means:

- removing whitespace
- removing comments
- shortening variable and function names
- removing unnecessary formatting

The code still works **exactly the same**,
but the file size is much smaller.

---

## Example

Original code:

```js
function calculateTotal(price, tax) {
  const total = price + price * tax;
  return total;
}
```

Minified version:

```js
function a(b,c){return b+b*c}
```

Same logic.
Much smaller size.

---

## Why minification matters

Smaller files mean:

- faster downloads
- less data transferred
- faster page load
- better performance on slow networks

This is especially important for:

- JavaScript bundles
- CSS files
- mobile users
- low-end devices

Even small savings add up.

---

## What gets minified

Minification usually applies to:

- JavaScript
- CSS
- sometimes HTML

Images and fonts are handled by **other optimisations**,
not minification.

---

## JavaScript minification

JavaScript minification typically includes:

- removing comments
- renaming variables (`userName` → `a`)
- shortening and simplifying expressions
- compressing expressions

Modern tools do this automatically.

---

## CSS minification

CSS minification includes:

- removing whitespace
- shortening values
- removing whitespace and formatting

Example:

```css
.button {
  margin: 0px;
  padding: 8px 16px;
}
```

Becomes:

```css
.button{margin:0;padding:8px 16px}
```

---

## Minification happens at build time

Important:

> You **never** write minified code yourself.

Minification is done by:

- bundlers
- build tools
- frameworks

Examples:

- Webpack
- Vite
- Rollup
- Next.js (automatic in production)
- CRA (Create React App)

In development, code is **not minified** to stay readable.

---

## Minification vs Compression

These are **not the same thing**.

### Minification

- changes the file content
- removes unnecessary characters
- happens at build time

### Compression (gzip / brotli)

- compresses files during transfer
- handled by the server or CDN
- happens at runtime

They are usually used **together**.

Best case:

> Minified files + compressed transfer

---

## How to spot minification in DevTools

In the Network tab:

- filenames often end with `.min.js`
- code looks unreadable
- file size is much smaller

In the Sources tab:

- minified code appears as one long line
- browser can “pretty-print” it for debugging

---

## When minification is critical

Minification is **essential** when:

- shipping production code
- serving users on mobile
- performance matters
- bundles are large

There is **no downside** in production.

---

## When minification is NOT relevant

Minification does **not** help when:

- performance issues are caused by slow APIs
- rendering logic is expensive
- too much JavaScript is executed
- layout and paint are the bottleneck

Minification helps **download time**, not runtime logic.

---

## Common mistakes

- assuming minification fixes slow code
- disabling minification in production
- debugging production issues without source maps
- confusing minification with compression

Minification is necessary - but not sufficient.

---

## Mental model

- Minification → smaller files
- Smaller files → faster downloads
- Faster downloads → quicker first load
- Runtime performance → separate concern

Think:

> “How heavy is this file to download?”

---

## Summary

- Minification removes unnecessary characters from code
- It makes JS and CSS files much smaller
- It happens automatically during production builds
- It improves load time, especially on slow networks
- It does not change behaviour or logic
- It does not fix slow execution
- Always enable it in production
