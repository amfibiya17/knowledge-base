# 6.10 Throttle vs Debounce

**Throttle** and **debounce** are techniques to control **how often a function runs**.

They are used to improve performance when an event fires many times, like:

- scroll
- resize
- mouse move
- typing / input

---

## The core problem

Some browser events fire **very often** (many times per second).

If you run heavy logic every time:

- the UI can lag
- the main thread can get blocked
- your app can feel slow

Throttle and debounce help by **limiting calls**.

---

## Throttle (run at most once per time window)

**Throttle** means:

> Run the function **at most once every X ms**.

Even if the event fires 100 times, the function runs on a schedule.

Example idea:

- scroll event fires many times
- throttled handler runs every **200ms**

### Good for

- scroll position tracking
- resize handling
- analytics events
- infinite scroll checks
- “run regularly while moving”

---

## Debounce (run only after the event stops)

**Debounce** means:

> Run the function **only after the event stops** for X ms.

If the user keeps typing/moving, the timer resets.

Example idea:

- user types in a search input
- debounced handler runs **300ms after typing stops**

### Good for

- search input / autocomplete requests
- saving drafts after user stops typing
- validation after typing stops
- “run once when the user finishes”

---

## Quick example

### Throttle (200ms)

```text
Event: ||||||||||||||||||||||||
Runs: |---|---|---|---|---|---|
```

```js
// Runs at most once per delay window
function throttle(fn, delay) {
  let lastCall = 0;

  return (...args) => {
    const now = Date.now();
    if (now - lastCall >= delay) {
      lastCall = now;
      fn(...args);
    }
  };
}
```

### Debounce (300ms)

```text
Event: ||||||||||||||||||||||||
Runs:                      |run|
```

```js
// Runs only after events stop for the delay time
function debounce(fn, delay) {
  let timer;

  return (...args) => {
    clearTimeout(timer);
    timer = setTimeout(() => fn(...args), delay);
  };
}
```

---

## Key difference

- **Throttle** → runs **during** the event, but not too often
- **Debounce** → runs **after** the event finishes

---

## Which one should I use?

Ask:

### “I need updates while the user is doing it”

→ use **throttle**

Examples:

- update scroll progress bar
- update “sticky” UI logic
- track mouse position (lightweight)

### “I only care about the final result”

→ use **debounce**

Examples:

- API search requests
- validation
- saving after typing

---

## Common mistakes

- debouncing scroll (UI can feel late)
- throttling search input (still too many API calls)
- using too small delay (no benefit)
- using too large delay (bad UX)

---

## Mental model

- Throttle = “run **regularly**”
- Debounce = “run **at the end**”

---

## Summary

- Throttle limits how often a function runs
- Debounce waits until the event stops
- Throttle is good for scroll/resize
- Debounce is good for typing/search
- Choose based on “during” vs “after”
