# 5.03 CSS-in-JS

CSS-in-JS is a styling approach where **CSS is written inside JavaScript**
and scoped directly to components.

Styles are usually created **at runtime** and live alongside the component logic.

---

## What CSS-in-JS is

With CSS-in-JS:

- styles are written in JavaScript (or TypeScript)
- styles are scoped to components by default
- class names are generated automatically
- styles can use props, state, and theme values

Popular libraries include:

- **styled-components**
- **Emotion**
- **Stitches**
- **vanilla-extract** (CSS-in-TS, compile-time → not runtime)

---

## Basic example (styled-components)

```tsx
import styled from "styled-components";

const Button = styled.button`
  background: blue;
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
`;

function App() {
  return <Button>Click</Button>;
}
```

Here:

- styles are defined next to the component
- `Button` is a React component
- styles are scoped automatically

---

## Styling based on props

One key feature of CSS-in-JS is **dynamic styling**.

```tsx
const Button = styled.button`
  background: ${(props) => (props.primary ? "blue" : "gray")};
  color: white;
`;

<Button primary />
<Button />
```

Styles can depend on:

- props
- state
- theme values

This is harder to do with plain CSS.

---

## Why CSS-in-JS exists

CSS-in-JS was created to solve problems like:

- global CSS collisions
- difficulty sharing styles with logic
- complex conditional styling
- theme support

It provides:

- automatic scoping
- dynamic styles
- co-located styles and logic

---

## When CSS-in-JS works well

CSS-in-JS is a good fit when:

- styles depend heavily on props or state
- theming is important
- components are highly dynamic
- design systems are being built
- you want styles close to logic

Common use cases:

- component libraries
- design systems
- highly interactive UI

---

## Trade-offs of CSS-in-JS

CSS-in-JS has downsides:

- runtime cost (styles generated in JS)
- larger bundle size
- more complex tooling
- harder to extract styles for debugging
- not just “CSS” anymore
- SSR can be more complex (depends on library)

It adds **power**, but also **complexity**.

---

## CSS-in-JS vs CSS Modules

**CSS Modules**

- plain CSS
- build-time scoping
- very predictable
- fast and simple

**CSS-in-JS**

- styles in JavaScript
- runtime styling
- very flexible
- more moving parts

Rule of thumb:

> CSS Modules → most apps

> CSS-in-JS → highly dynamic or design-system-heavy apps

---

## CSS-in-JS vs Global CSS

CSS-in-JS is **not a replacement** for Global CSS.

You still need Global CSS for:

- resets
- base typography
- design tokens
- app-wide foundations

They are complementary.

---

## Common mistakes

- using CSS-in-JS everywhere by default
- putting large layout systems inside components
- ignoring performance impact
- mixing multiple styling solutions without a plan

Choose one primary styling approach.

---

## Mental model

- CSS Modules → static component styles
- CSS-in-JS → dynamic, prop-driven styles

Pick the **simplest tool** that solves the problem.

---

## Summary

- CSS-in-JS writes styles inside JavaScript
- Styles are scoped to components automatically
- It enables powerful dynamic styling
- It adds runtime and tooling complexity
- Best for highly dynamic UI or design systems
- Not required for most applications
