# 4.07 Error Boundaries

Error Boundaries are a React feature used to **catch runtime errors**
in the component tree and **prevent the entire app from crashing**.

They provide a **fallback UI** when something goes wrong.

---

## What problem Error Boundaries solve

Without Error Boundaries:

- a JavaScript error in one component
- can crash the **entire React app**
- leaving a blank screen

With Error Boundaries:

- errors are caught gracefully
- React shows a fallback UI
- the rest of the app keeps working

---

## What Error Boundaries catch

Error Boundaries catch errors that happen:

- during rendering
- in lifecycle methods
- in constructors of child components

They do **not** catch:

- event handler errors
- async errors outside render (e.g. `setTimeout`, `fetch callbacks`)
- errors inside the error boundary itself
- server-side rendering errors

---

## Important limitation

> **Error Boundaries must be class components**

There is **no hook-based equivalent** today.

---

## Basic example

```jsx
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  componentDidCatch(error, info) {
    console.error(error, info);
  }

  render() {
    if (this.state.hasError) {
      return <h1>Something went wrong.</h1>;
    }

    return this.props.children;
  }
}
```

---

## Usage

```jsx
<ErrorBoundary>
  <Profile />
</ErrorBoundary>
```

If `<Profile />` throws an error:

- fallback UI is shown
- the rest of the app does not crash

---

## Granularity matters

Avoid wrapping the entire app in one boundary.

Better approach:

```jsx
<ErrorBoundary>
  <Sidebar />
</ErrorBoundary>

<ErrorBoundary>
  <MainContent />
</ErrorBoundary>

```

Failures stay isolated.

---

## Common use cases

- feature areas
- pages
- widgets
- third-party components
- dynamic or experimental UI

---

## Error Boundaries vs `try/catch`

`try/catch`:

- works for synchronous code
- does not catch render errors in React

Error Boundaries:

- handle render-time errors
- integrate with React lifecycle

---

## Event handler errors

Error Boundaries do **not** catch event errors:

```jsx
<button
  onClick={() => {
    throw new Error("Boom");
  }}
>

```

These must be handled inside the handler.

---

## What Error Boundaries do NOT do

Error Boundaries:

- do not prevent errors
- do not replace validation
- do not catch async errors automatically
- do not fix broken logic

They only control **failure behaviour**.

---

## Mental model

- Component → renders UI
- Error Boundary → safety net
- Error → fallback UI
- App stays alive

---

## When to use Error Boundaries

Use when:

- components may fail
- third-party code is used
- graceful failure is required

---

## When NOT to use them

Avoid when:

- errors should be fixed at source
- logic is simple and controlled
- boundaries are used to hide bugs

---

## Common mistakes

- one boundary for the whole app
- assuming all errors are caught
- forgetting they must be class components

---

## Summary

- Error Boundaries catch render-time errors
- They prevent full app crashes
- They must be class components
- They show fallback UI
- They are a safety net, not a fix
