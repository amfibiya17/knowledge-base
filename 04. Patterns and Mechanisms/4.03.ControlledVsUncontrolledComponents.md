# 4.03 Controlled vs Uncontrolled Components

Controlled and uncontrolled components describe how form inputs manage their data.

---

## What a controlled component is

A **controlled component** is a component where:

- form data is stored in **React state**
- the input value is controlled by React
- every change goes through state updates

React is the **single source of truth**.

---

## What an uncontrolled component is

- form data is stored in the **DOM**
- React does **not** control the input value
- values are accessed only when needed (for example, on submit)

The **DOM is the source of truth**.

---

## Example: controlled input

```jsx
function ControlledInput() {
  const [value, setValue] = useState("");

  return (
    <input
      type="text"
      value={value}
      onChange={(e) => setValue(e.target.value)}
    />
  );
}
```

Here:

- `value` comes from React state
- `onChange` updates the state
- the input always reflects the current state

---

## Example: uncontrolled input

```jsx
function UncontrolledInput() {
  const inputRef = useRef(null);

  function handleSubmit() {
    console.log(inputRef.current.value);
  }

  return (
    <>
      <input ref={inputRef} />
      <button onClick={handleSubmit}>Submit</button>
    </>
  );
}
```

Here:

- React does not track the input value
- the value lives in the DOM
- React reads the value only when needed

---

## Key differences

| Controlled            | Uncontrolled               |
| --------------------- | -------------------------- |
| Value stored in state | Value stored in DOM        |
| React controls input  | DOM controls input         |
| Requires `onChange`   | Uses refs                  |
| Easy to validate      | Harder to validate         |
| Predictable behaviour | Less predictable behaviour |

---

## When to use controlled components

Use **controlled components** when:

- you need validation
- input affects other UI
- you need to enforce formatting
- you want predictable behaviour

This is the **recommended default** in React.

---

## When uncontrolled components make sense

Use **uncontrolled components** when:

- building very simple forms
- migrating legacy code
- performance is critical
- React does not need to track every change

They are valid, just less common.

---

## Common mistakes

- Mixing controlled and uncontrolled patterns
- Forgetting `onChange` on controlled inputs
- Setting `value` without handling updates
- Switching between controlled and uncontrolled at runtime

React will warn you when this happens.

---

## Mental model

- **Controlled** → React owns the data
- **Uncontrolled** → DOM owns the data
- Controlled = more code, more control
- Uncontrolled = less code, less control

---

## Summary

- Controlled components store input data in state
- Uncontrolled components store data in the DOM
- Controlled components are the React default
- Uncontrolled components use refs
- Choose based on control vs simplicity
