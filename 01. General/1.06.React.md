# 1.06 React

## What React is

React is a **JavaScript library for building user interfaces**.

It focuses on:

- describing **what the UI should look like**
- keeping the UI in sync with data
- updating the page efficiently when data changes

React is **not** a framework and does not control everything in your app.

---

## What React controls

React is responsible for:

- rendering components
- managing component state
- updating the UI when state or props change
- coordinating updates using the Virtual DOM

React decides **when** and **what** to re-render.

---

## What React does not control

React does **not**:

- handle routing (by default)
- manage global state (by default)
- handle HTTP requests
- apply CSS isolation automatically
- control the browser’s DOM directly

These concerns are handled by:

- libraries
- browser APIs
- tooling choices

---

## Declarative UI (core idea)

React uses a **declarative** approach.

Instead of saying:

> “Find this element and update it”

You say:

> “This is how the UI should look for this data”

```jsx
<button disabled={isLoading}>Save</button>
```

React figures out **how to update the DOM**.

---

## Rendering vs re-rendering

- **Render**: React creates a description of the UI (Virtual DOM)
- **Re-render**: React re-runs the component to produce a new UI description

Re-rendering:

- does not automatically mean DOM updates
- is cheap compared to DOM manipulation

Only actual changes are applied to the real DOM.

---

## What causes a re-render

A component re-renders when:

- its **state** changes
- its **props** change
- its **parent re-renders**

Re-rendering is normal and expected in React.

---

## Data flow in React

React follows **one-way data flow**:

- data flows from parent → child
- props are read-only
- state is owned by the component that manages it

Children request changes via functions passed down as props.

---

## Identity and keys

React relies on **identity** to update lists correctly.

- keys help React track items between renders
- keys must be stable and unique
- keys identify items, not positions

This is essential for correct reconciliation.

---

## Immutability (why it matters)

React expects state updates to be immutable.

This means:
**do not change the existing state** - create a new value instead.

```js
// ❌ Mutating existing state (same array)
items.push(newItem);
setItems(items);
```

```js
// ✅ Immutable update (new array)
setItems([...items, newItem]);
```

React detects state changes by comparing references
(not by checking values inside arrays or objects).

Creating a new array allows React to know that state has changed.

---

## Common misconceptions

- React does not update the DOM on every render
- React is not “slow by default”
- Re-rendering is not the same as repainting the page
- Virtual DOM is not the same as Shadow DOM
- React does not magically optimise bad component design

---

## Mental model to remember

You can think of React as:

- a system that recalculates UI
- compares old and new descriptions
- updates the browser only where needed

You describe **state → UI**, React handles **updates**.

---

## Summary

- React is a UI library, not a full framework
- React is declarative, not imperative
- State and props drive rendering
- Re-renders are normal and cheap
- The Virtual DOM coordinates updates
- One-way data flow keeps changes predictable
- Keys and immutability are essential for correctness
