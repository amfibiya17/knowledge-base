# 1.05 Keys in Lists

## What keys are

A **key** is a special value that React uses to identify items in a list.

Keys help React understand **which item is which** when a list changes.

Keys are passed as a prop called `key`, but they are **not available inside the component**.

---

## Why keys are needed

Lists can change over time:

- items can be added
- items can be removed
- items can be reordered

React needs a way to track items between renders.

Keys allow React to:

- match old items with new items
- update only what changed
- avoid unnecessary DOM updates

---

## Basic example

When rendering a list:

```jsx
items.map((item) => <li key={item.id}>{item.label}</li>);
```

Here:

- `item.id` uniquely identifies each item
- React uses `key` to track each list element

---

## Key vs id vs index

### Using id as key (recommended)

- id comes from your data
- it identifies **what** the item is
- it stays the same even if the list order changes
- React can correctly track each item

```js
const users = [
  { id: "u1", name: "Anna" },
  { id: "u2", name: "Ben" },
  { id: "u3", name: "Cara" },
];
```

```jsx
users.map((user) => <li key={user.id}>{user.name}</li>);
```

### Using index as key (problematic)

- comes from the item’s position in the array
- identifies **where** the item is
- can change when the list changes

```jsx
users.map((user, index) => <li key={index}>{user.name}</li>);
```

If the list changes (for example, a new user is added at the top):

```js
[
  { id: "u4", name: "Dan" },
  { id: "u1", name: "Anna" },
  { id: "u2", name: "Ben" },
  { id: "u3", name: "Cara" },
];
```

- all indexes shift
- React thinks items are different than before
- DOM nodes may be reused incorrectly
- state and inputs can break

### Key vs id vs index (summary)

- id → identifies what the item is (from data)
- index → identifies where the item is (position)
- key → tells React how to recognise items between renders

Most of the time, `key` should be set to `item.id`.

---

## When using index as key is acceptable

Using index as a key is usually OK **only if all of these are true**:

- the list is static
- items are never reordered
- items are never added or removed

**Example:**

- a fixed list of labels
- static table headers

---

## Common mistakes

- Forgetting to add a key when rendering lists
- Using array indexes by default
- Using non-unique values as keys
- Generating keys randomly (e.g. `Math.random()`)

Keys must be:

- **stable**
- **unique within the list**

---

## Summary

- Keys help React identify list items
- Keys are required when rendering lists
- Use stable, unique values (usually `id`)
- Avoid array indexes unless the list is static
- Keys identify items, not positions
