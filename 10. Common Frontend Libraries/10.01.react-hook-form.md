# 10.01 React Hook Form

**React Hook Form** is a library for **building and managing forms**
using **React hooks**.

It focuses on:

- performance
- minimal re-renders
- simple validation
- working _with_ native form behaviour, not against it

---

## Why forms are hard in React

In plain React, forms often become:

- verbose
- full of `useState`
- hard to validate
- slow (many re-renders)

Typical problems:

- managing input state manually
- syncing validation with UI
- handling errors cleanly
- scaling to large forms

React Hook Form solves these problems.

---

## Core idea of React Hook Form

The key idea:

> **Let the browser manage input state.
> React Hook Form just reads from it.**

Instead of controlling every input with React state,
React Hook Form uses:

- uncontrolled inputs
- refs
- subscriptions

This means **fewer re-renders and better performance**.

---

## Basic usage

```tsx
import { useForm } from "react-hook-form";

function Form() {
  const { register, handleSubmit } = useForm();

  function onSubmit(data) {
    console.log(data);
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register("email")} />
      <button type="submit">Submit</button>
    </form>
  );
}
```

What’s happening:

- `register` connects inputs to the form
- input values are tracked internally
- `handleSubmit` gathers and validates data

No `useState` per input.

---

## `useForm` - the main hook

`useForm()` creates a **form controller**.

Common things it returns:

- `register` → connect inputs
- `handleSubmit` → submit handler
- `formState` → errors, touched, validity
- `watch` → observe values
- `setValue` → update a field programmatically
- `reset` → reset the form

Example:

```ts
const {
  register,
  handleSubmit,
  formState: { errors, isSubmitting },
} = useForm();
```

---

## Validation

Validation rules live **next to inputs**.

```tsx
<input
  {...register("email", {
    required: "Email is required",
    pattern: {
      value: /^\S+@\S+$/,
      message: "Invalid email",
    },
  })}
/>;

{
  errors.email && <p>{errors.email.message}</p>;
}
```

Why this is nice:

- validation logic is close to the field
- error messages are explicit
- no extra state needed

---

## Schema validation (Yup / Zod)

For complex forms, validation is often defined **as a schema**.

Common choice today: **Zod**.

```ts
const schema = z.object({
  email: z.string().email(),
  password: z.string().min(8),
});
```

Used with React Hook Form via a resolver.

Why schemas are useful:

- single source of truth
- reusable between frontend & backend
- easier to reason about complex rules

---

## Performance benefit

React Hook Form is fast because:

- inputs are uncontrolled
- typing usually does not trigger re-renders
- only affected fields update

Compared to controlled forms:

- less React state
- fewer renders
- better performance on large forms

This matters for:

- long forms
- dynamic fields
- enterprise apps

---

## Working with custom components

Native inputs work automatically.

Custom components (e.g. date pickers, selects) use **Controller**.

```tsx
import { Controller } from "react-hook-form";

<Controller
  name="date"
  control={control}
  render={({ field }) => <DatePicker {...field} />}
/>;
```

Use `Controller` when:

- the component does not expose a native `ref`
- value is controlled internally
- you can’t use `register` directly

---

## React Hook Form vs controlled inputs

**Controlled inputs**

- `useState` per field
- more re-renders
- more boilerplate

**React Hook Form**

- browser manages input state
- fewer re-renders
- simpler code
- better performance

React Hook Form is closer to **how HTML forms were designed**.

---

## When React Hook Form is a great choice

Use it when:

- building real forms (not just 1–2 inputs)
- validation matters
- performance matters
- forms are complex or dynamic
- accessibility is important

It is a very common **industry standard**.

---

## When it may be overkill

It may be unnecessary when:

- the form has 1–2 fields
- validation is trivial
- you already control state elsewhere

Simple forms can still use `useState`.

---

## Common mistakes

- mixing controlled inputs and `register` incorrectly
- ignoring accessibility (labels, errors)
- putting validation logic far from fields
- overusing `watch` for everything
- not understanding uncontrolled inputs

---

## Mental model

- `useForm` → form brain
- `register` → connect inputs
- browser → owns input state
- React Hook Form → reads & validates
- React → renders UI

---

## Summary

- React Hook Form is a form management library built on hooks
- It uses uncontrolled inputs for performance
- Validation is simple and declarative
- Schema validation integrates cleanly
- Great for real-world, complex forms
- Not required for very small forms
- A strong default choice in modern React apps
