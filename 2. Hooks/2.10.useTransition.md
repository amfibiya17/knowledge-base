# 2.10 useTransition

This file introduces the `useTransition` hook.  
`useTransition` is used to **mark state updates as non-urgent**, allowing React to keep the UI responsive during expensive updates.

It is mainly about **prioritising updates**, not about performance optimisation by itself.

---

## What `useTransition` is

`useTransition` is a React hook that allows you to:

- distinguish between **urgent** and **non-urgent** updates
- keep the UI responsive during heavy rendering work
- defer expensive state updates without blocking user input

It works with React’s **concurrent rendering** features.

---

## Basic syntax

```jsx
const [isPending, startTransition] = useTransition();
```

Here:

- `isPending` → boolean indicating if a transition is ongoing
- `startTransition` → function used to mark updates as non-urgent

It represents React’s rendering work, not application logic.

---

## Urgent vs non-urgent updates

In React:

- **urgent updates** → user input, typing, clicking, hovering
- **non-urgent updates** → filtering large lists, rendering heavy UI, navigation

React always prioritises urgent updates.

`useTransition` tells React:

> “This update can wait.”

---

## Example: deferring expensive updates

```jsx
function Search({ items }) {
  const [query, setQuery] = useState("");
  const [filteredItems, setFilteredItems] = useState(items);
  const [isPending, startTransition] = useTransition();

  function handleChange(e) {
    const value = e.target.value;
    setQuery(value); // urgent update

    startTransition(() => {
      setFilteredItems(items.filter((item) => item.includes(value)));
    });
  }

  return (
    <>
      <input value={query} onChange={handleChange} />
      {isPending && <span>Updating…</span>}
      <List items={filteredItems} />
    </>
  );
}
```

## What happens here

- typing updates `query` immediately (urgent)
- filtering runs inside `startTransition` (non-urgent)
- React keeps input responsive
- heavy re-rendering can be interrupted if needed
- UI updates when ready

---

## What `isPending` means

`isPending`:

- is `true` while the transition is running
- becomes `false` when React finishes rendering the transition
- can be used to show loading indicators or skeletons

It does **not** mean a network request is happening.
It only reflects React’s rendering state.

---

## Why `useTransition` exists

Without `useTransition`:

- all updates are treated as urgent
- expensive renders can block the UI
- typing may feel slow or laggy

`useTransition` helps when:

- rendering is expensive
- updates happen frequently
- UI responsiveness matters

---

## When to use `useTransition`

Use it when:

- state updates cause expensive renders
- user input should stay responsive
- you are rendering large lists or trees
- navigation triggers heavy UI changes

---

## When NOT to use it

Do **not** use it for:

- simple or cheap updates
- replacing loading state
- data fetching logic
- every state update by default

If rendering is cheap → **you don’t need it**.

---

## `useTransition` and correctness

Important to know:

- transitions can be interrupted
- React may abandon intermediate renders
- your UI must handle being rendered multiple times

This is why updates inside transitions must be **pure and safe**.

---

## What `useTransition` does NOT do

- It does not make code faster by default
- It does not prevent re-renders
- It does not replace memoisation
- It does not handle async logic

It only affects **update priority**.

---

## Common mistakes

- Wrapping everything in `startTransition`
- Using it for simple state updates
- Expecting it to manage loading state
- Assuming it fixes performance automatically

---

## Mental model

- Urgent updates → user interactions
- Transitions → background UI updates
- React decides when to pause or resume work
- UI stays responsive

Think of `useTransition` as:

> “Let the user go first.”

---

## Summary

- `useTransition` marks updates as non-urgent
- React prioritises urgent updates automatically
- It keeps the UI responsive during heavy rendering
- `isPending` indicates transition progress
- Best used for expensive UI updates
- Use sparingly and intentionally
